<html><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/><link rel="preload" as="image" href="/images/linux-on-mac.jpg"/><title>Linux on the 2012 MacBook Air | David Elentok&#x27;s Blog</title><meta property="og:title" content="Linux on the 2012 MacBook Air"/><meta property="og:description"/><meta property="og:type" content="article"/><meta property="og:image" content="/images/linux-on-mac.jpg"/><meta property="og:url" content="https://blog.elentok.com/2017/06/linux-on-macbook-air.html"/><meta property="og:site_name" content="David Elentok&#x27;s Blog"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@elentok"/><meta name="twitter:title" content="Linux on the 2012 MacBook Air"/><meta name="twitter:image" content="https://blog.elentok.com/images/linux-on-mac.jpg"/><meta name="twitter:description"/><style type="text/css">
      body {
        font-family: sans-serif;
        background: #242424;
        color: #e9e9e9;
        font-size: 18px;
        line-height: 1.5;
      }

      a, a:visited {
        color: #98adec;
      }

      a:hover {
        color: #c5d2f9;
      }

      .e-container {
        margin: auto;
        max-width: 700px;
        padding: 15px;
      }
      </style><style type="text/css">
          @import "/style.css";
          @import url('https://fonts.googleapis.com/css?family=Open+Sans:400,700|Open+Sans+Condensed:300|Source+Code+Pro');
          </style></head><body><div class="e-container"><a class="e-header" href="/"><div class="e-header__avatar"><div class="e-avatar"></div></div><h2>David Elentok&#x27;s Blog</h2></a><div class="e-about-me"><a href="http://elentok.com">About me</a></div><div class="e-post e-post--full"><h1 class="e-post__title">Linux on the 2012 MacBook Air</h1><div class="e-post__date">June 7, 2017</div><div class="e-post__tags"><a class="e-post-tag" href="/tags/linux.html">linux</a><a class="e-post-tag" href="/tags/software.html">software</a><a class="e-post-tag" href="/tags/mac.html">mac</a><a class="e-post-tag" href="/tags/guide.html">guide</a></div><div class="e-post__body"><p><img src="/images/linux-on-mac.jpg" alt="Linux on Mac"/></p>
<p>Last week I tried installing Arch Linux on my 6yo MacBook Air (Mid-2012), to my surprise it went
much better than expected :)</p>
<h2 id="contents">Contents</h2>
<ul>
<li><a href="#why-did-i-do-it">Why did I do it?</a></li>
<li><a href="#impressions-so-far">Impressions so far</a></li>
<li><a href="#setup-dual-boot-with-r-e-find">Setup dual-boot with rEFind</a></li>
<li><a href="#install-arch-linux">Install Arch Linux</a></li>
<li><a href="#setup-keyboard-shortcuts">Setup keyboard shortcuts</a></li>
<li><a href="#setup-trackpad">Setup trackpad</a></li>
</ul>
<h2 id="why-did-i-do-it">Why did I do it?</h2>
<p>Mostly for two reasons:</p>
<ol>
<li>Performance - after the last OS X upgrade it&#x27;s become sluggish and uncomfortable.</li>
<li>Window Management - Ever since I moved to Mac I&#x27;ve been missing the
<a href="https://i3wm.org">i3 window manager</a>. Several months ago I&#x27;ve switched a Linux workstation at
work (from a Mac Pro) and started using i3 again which emphasized to me how terrible window
management is on OS X.</li>
</ol>
<h2 id="impressions-so-far">Impressions so far</h2>
<p>I&#x27;ve been using it for about a week and it&#x27;s amazing, much better than I expected. It&#x27;s not perfect,
but I think overall it&#x27;s better the OS X experience.</p>
<p>A few things that I haven&#x27;t solved yet:</p>
<ul>
<li>Proper lock-on-lid-close (I&#x27;m currently using xscreensaver to lock the screen but it doesn&#x27;t seem
to be fully synced with the lid-close event, there are instructions in the Arch Linux wiki, I
haven&#x27;t tried them yet).</li>
<li>Low battery warnings (Once I reached 2% the machine just shut off, I didn&#x27;t have enough time to
plug it in, I need to setup proper warnings).</li>
</ul>
<h2 id="setup-dual-boot-with-r-e-find">Setup dual-boot with rEFind</h2>
<p>I&#x27;m dual-booting Arch Linux and OS X from the internal SSD.</p>
<p>First, from OS X, resize your main partition and create a secondary partition (I made the main 20GB
smaller to make space for the Linux partition).</p>
<p>Afterwards, download and install the <a href="http://www.rodsbooks.com/refind/">rEFInd boot manager</a> (I had to boot into safe/recovery mode
to do that).</p>
<p>Once rEFInd is installed you&#x27;ll have a new boot menu whenever you start your Mac which will allow to
boot from Linux partition and from USB disks.</p>
<h2 id="install-arch-linux">Install Arch Linux</h2>
<p>Download the <a href="https://www.archlinux.org/download/">Arch Linux ISO</a> and put it on USB disk (I used <a href="https://rufus.akeo.ie/">Rufus</a>).</p>
<p>Restart your Mac with the USB disk inserted and you&#x27;ll see it in the rEFInd boot menu.</p>
<p>Once you boot from it, delete HFS partition you&#x27;ve created in the previous step and create two
partitions: &quot;/&quot; and &quot;swap&quot; (You can create other if you wish, I just needed these two).</p>
<p>A few notes:</p>
<ul>
<li>
<p>For the base Arch installation you can following the <a href="https://wiki.archlinux.org/index.php/installation_guide">Arch Wiki Installation Guide</a> or my
<a href="https://github.com/elentok/dotfiles/blob/master/docs/arch.md">shorted version</a>.</p>
</li>
<li>
<p>Installing Arch Linux requires an internet connection. To connect to a WiFi network, first get the
name of the network interface by running <code>ip link</code> and then running the following commands:</p>
<pre><div style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>wpa_supplicant -i INTERFACE </span><span class="token" style="color:hsl(220, 14%, 71%)">\</span><span>
</span><span>  -c </span><span class="token" style="color:hsl(207, 82%, 66%)">&lt;</span><span class="token" style="color:hsl(220, 14%, 71%)">(</span><span>wpa_passphrase </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;SSID&quot;</span><span> </span><span class="token" style="color:hsl(95, 38%, 62%)">&quot;PASSWORD&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">)</span><span>
</span>
<!-- -->dhcpcd INTERFACE</code></div></pre>
<p>Running the DHCP client manually is only for the installation process, afterwards you can use
NetworkManager to do an easier setup.</p>
</li>
<li>
<p>You can skip the step about installing Grub because rEFInd already takes care of it, it boots the
kernel directly.</p>
</li>
<li>
<p>Before rebooting make sure you&#x27;ve installed the packages required for making WiFi connections
(they&#x27;re included with the live usb, but they&#x27;re not installed automatically):</p>
<pre><div style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(207, 82%, 66%)">sudo</span><span> pacman -S iw wpa_supplicant</span></code></div></pre>
</li>
</ul>
<h2 id="setup-keyboard-shortcuts">Setup keyboard shortcuts</h2>
<p>To support the display brightness and keyboard backlight keys, install these two packages:</p>
<pre><div style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-bash" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>pacman -S xorg-backlight
</span>yaourt -S kbdlight</code></div></pre>
<p>Since I&#x27;m using i3 I just added the following lines to my <code>~/.i3/config</code> file:</p>
<pre><div style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-plaintext" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span># Support the volume keys
</span>bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +5% &amp;&amp; killall -SIGUSR1 i3status
<!-- -->bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -5% &amp;&amp; killall -SIGUSR1 i3status
<!-- -->bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
<!-- -->
<!-- --># Support the display brightness keys
<!-- -->bindsym XF86MonBrightnessDown exec xbacklight -dec 5
<!-- -->bindsym XF86MonBrightnessUp exec xbacklight -inc 5
<!-- -->
<!-- --># Support the keyboard brightness keys
<!-- -->bindsym XF86KbdBrightnessDown exec kbdlight down 5
<!-- -->bindsym XF86KbdBrightnessUp exec kbdlight up 5</code></div></pre>
<h2 id="setup-trackpad">Setup trackpad</h2>
<p>I couldn&#x27;t get the trackpad to work as smoothly as on OS X, but I did manage to make it usable by
writing the following lines to <code>/etc/X11/xorg.conf.d/30-touchpad.conf</code>:</p>
<pre><div style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-plaintext" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span>Section &quot;InputClass&quot;
</span>  Identifier &quot;libinput touchpad (custom)&quot;
<!-- -->  MatchIsTouchpad &quot;on&quot;
<!-- -->  MatchDevicePath &quot;/dev/input/event*&quot;
<!-- -->  Driver &quot;libinput&quot;
<!-- -->
<!-- -->  # Enable click-to-tap
<!-- -->  Option &quot;Tapping&quot; &quot;on&quot;
<!-- -->
<!-- -->  # Disable middle/right button areas and instead
<!-- -->  # use two-finger click into as a context click
<!-- -->  # and three-finger click into as a middle click.
<!-- -->  Option &quot;ClickMethod&quot; &quot;clickfinger&quot;
<!-- -->
<!-- -->  # Reverse scrolling direction
<!-- -->  Option &quot;NaturalScrolling&quot; &quot;true&quot;
<!-- -->EndSection</code></div></pre></div></div><div class="e-post__next"><span>Next:</span><a class="e-post__next" href="/2013/03/global-hotkeys-for-8tracks-on-mac.html">Global hotkeys for 8tracks on Mac</a></div></div></body></html>