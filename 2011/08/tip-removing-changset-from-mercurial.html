<html><head><title>Tip: Removing a changset from a Mercurial repository | David Elentok's Blog</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/><meta property="og:title" content="Tip: Removing a changset from a Mercurial repository"/><meta property="og:description"/><meta property="og:type" content="article"/><meta property="og:image" content="http://blog.elentok.com/avatar-og.png"/><meta property="og:url" content="http://blog.elentok.com/2011/08/tip-removing-changset-from-mercurial.html"/><meta property="og:site_name" content="David Elentok's Blog"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@elentok"/><meta name="twitter:title" content="Tip: Removing a changset from a Mercurial repository"/><meta name="twitter:image" content="http://blog.elentok.com/avatar-og.png"/><meta name="twitter:description"/><style type="text/css">body {
  font-family: sans-serif;
  background: #242424;
  color: #e9e9e9;
  font-size: 18px;
  line-height: 1.5;
}

a, a:visited {
  color: #98adec;
}

.e-container {
  margin: auto;
  max-width: 700px;
  padding: 15px;
}</style></head><body><div class="e-container"><a class="e-header" href="/"><div class="e-header__avatar"><div class="e-avatar"></div></div><h2>Elentok's Blog</h2></a><div class="e-about-me"><a href="http://elentok.com">About me</a></div><div class="e-post e-post--full"><h1 class="e-post__title">Tip: Removing a changset from a Mercurial repository</h1><div class="e-post__date">August 17th, 2011</div><div class="e-post__tags"><a class="e-post-tag" href="/tags/dvcs.html">dvcs</a><a class="e-post-tag" href="/tags/programming.html">programming</a><a class="e-post-tag" href="/tags/mercurial.html">mercurial</a><a class="e-post-tag" href="/tags/tips.html">tips</a></div><div class="e-post__body"><p>The <code>rollback</code> command only removes the latest changeset, if you want to
remove/undo multiple changesets (and all of their descendants) from a repository
you can use the &quot;<a href="http://mercurial.selenic.com/wiki/Strip">strip</a>&quot; method that comes with the &quot;<a href="http://mercurial.selenic.com/wiki/MqExtension">Mq</a>&quot; extension:</p>
<h2 id="step-1-enable-the-mq-extension">Step 1 - Enable the Mq extension</h2>
<p>The Mq extension is distributed with Mercurial so to enable it just edit ~/.hgrc
(in windows: C:\Users\UserName.hgrc) and add the following lines:</p>
<pre><code><span class="hljs-string">[extensions]</span>
  mq=
</code></pre><p>If you use TortoiseHg, then you can just open the settings page, and in the
Extensions section enable &quot;mq&quot;.</p>
<!--more-->
<h2 id="step-2-remove-a-changeset">Step 2 - Remove a changeset</h2>
<p>Find the revision number of the changeset you wish to remove (via TortoiseHg or
<code>hg log</code>) and execute the following command:</p>
<pre><code><span class="hljs-meta">&gt;</span><span class="bash"> hg strip &lt;revision-number&gt;</span>
</code></pre><p>If you mess up you can restore the changeset by running:</p>
<pre><code><span class="hljs-meta">&gt;</span><span class="bash"> hg unbundle .hg/strip-backup/filename</span>
</code></pre></div><div class="e-post__next"><span>Next:</span><a href="/2011/08/mercurial-automatically-run-unittests.html">Mercurial: Automatically run unittests before commit</a></div></div></div><style type="text/css">@import "/style.css";
@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro');</style></body></html>