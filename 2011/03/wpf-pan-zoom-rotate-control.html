<html><head><title>@elentok - </title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/><style type="text/css">body {
  font-family: sans-serif;
  background: #242424;
  color: #e9e9e9;
  font-size: 18px;
  line-height: 1.5;
}

pre, code {
  font-family: 'Source Code Pro';
}

pre {
  padding: 15px;
  background-color: #121212;
  border-radius: 5px;
  line-height: 1.3;
}

a, a:visited {
  color: #98adec;
}

.e-page {
  margin: auto;
  max-width: 700px;
  padding: 15px;
}</style></head><body><div class="e-page"><a class="e-header" href="/"><div class="e-header__avatar"><div class="e-avatar"></div></div><h1>Elentok's Blog</h1></a><div class="e-post"><h2>WPF Pan, Zoom &amp; Rotate Control</h2><div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-d3CyDHTo3l8/TZS2JJIMAaI/AAAAAAAABJw/iPeLoWp9NPM/s1600/viewera.png"><img src="http://4.bp.blogspot.com/-d3CyDHTo3l8/TZS2JJIMAaI/AAAAAAAABJw/iPeLoWp9NPM/s1600/viewera.png" alt=""></a></div>

<p>In the past few days I have been working on an image viewer control that allows the user to pan (via scrollbars and by dragging the mouse), zoom (by mouse wheel and by buttons) and rotate (by dragging the mouse in &quot;rotate&quot; mode).</p>
<p>I must say this was the funnest of all of my WPF experiences, I really love the elegance of WPF. The implementation ended up being a completely generic viewer that can contain whatever you want (not just images).</p>
<p>The viewer is actually two controls: ViewerControl and FullViewerControl.</p>
<p>The ViewerControl is the inner part (without the toolbar and statusbar), its behavior is completely customizable by setting the MouseClickHandler, MouseDragHandler and MouseWheelHandler dependency properties (these are not events, but three different interfaces that contain a method that handles the action; this way they even be modified in XAML).</p>
<p>The FullViewerControl wraps around the ViewerControl, sets the default behavior (mouse wheel zooms, ...) and adds a toolbar (to allow changing drag/pan/zoom-in/zoom-out modes and auto-fitting the contents) and a status bar that displays the current zoom level and rotation angle.</p>
<p>To use the FullViewerControl in your code, just add the following:</p>
<pre><v:FullViewerControl>
    <v:FullViewerControl.ExtraToolbarItems>

      <-- insert buttons here -->

    </v:FullViewerControl.ExtraToolbarItems>

    <-- insert viewer contents here -->    

  </v:FullViewerControl>
</pre>

<p>The source code for the viewer is freely available as a part of my Elentok.Framework project (LGPL license) at <a href="https://bitbucket.org/3david/elentok.framework">https://bitbucket.org/3david/elentok.framework</a>, in the &quot;Elentok.Framework.Wpf&quot; project, under &quot;Controls/Viewer&quot;.</p>
<p>To build the framework project and test out the viewer, run the &quot;Scripts\Build-Debug.bat&quot; script and then run &quot;Build\Elentok.Framework.Wpf.Demos.exe&quot;.</p>
</div><div class="e-post__next"><span>Next:</span><a href="/2011/07/sharpdevelop-dark-color-scheme.html">SharpDevelop dark color scheme</a></div></div></div><style type="text/css">@import "/style.css";
@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro');</style></body></html>