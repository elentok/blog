<html><head><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"/><title>WPF and KeyboardNavigation TabNavigation = &quot;Local&quot; | David Elentok&#x27;s Blog</title><meta property="og:title" content="WPF and KeyboardNavigation TabNavigation = &quot;Local&quot;"/><meta property="og:description"/><meta property="og:type" content="article"/><meta property="og:image"/><meta property="og:url" content="https://blog.elentok.com/2011/03/wpf-and-keyboardnavigationtabnavigation.html"/><meta property="og:site_name" content="David Elentok&#x27;s Blog"/><meta name="twitter:card" content="summary"/><meta name="twitter:site" content="@elentok"/><meta name="twitter:title" content="WPF and KeyboardNavigation TabNavigation = &quot;Local&quot;"/><meta name="twitter:image" content="https://blog.elentok.com/avatar-og.png"/><meta name="twitter:description"/><style type="text/css">
      body {
        font-family: sans-serif;
        background: #242424;
        color: #e9e9e9;
        font-size: 18px;
        line-height: 1.5;
      }

      a, a:visited {
        color: #98adec;
      }

      a:hover {
        color: #c5d2f9;
      }

      .e-container {
        margin: auto;
        max-width: 700px;
        padding: 15px;
      }
      </style><style type="text/css">
          @import "/style.css";
          @import url('https://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro');
          </style></head><body><div class="e-container"><a class="e-header" href="/"><div class="e-header__avatar"><div class="e-avatar"></div></div><h2>Elentok&#x27;s Blog</h2></a><div class="e-about-me"><a href="http://elentok.com">About me</a></div><div class="e-post e-post--full"><h1 class="e-post__title">WPF and KeyboardNavigation TabNavigation = &quot;Local&quot;</h1><div class="e-post__date">March 15, 2011</div><div class="e-post__tags"><a class="e-post-tag" href="/tags/programming.html">programming</a><a class="e-post-tag" href="/tags/tips.html">tips</a><a class="e-post-tag" href="/tags/wpf.html">wpf</a></div><div class="e-post__body"><p>In my WPF projects I use a lot of data templates, and some of this templates require a custom tab
order. To do this I set the <code>TabIndex</code> property on the relevant items inside the data template.</p>
<p>When I used the same template multiple times in the same page I noticed that the tab navigation
didn&#x27;t behave the way I wished it to (instead of jumping between indexes 1, 2, 3... in each
template, and jumped between index 1 in every template, then index 2 and so forth).</p>
<p>After some googling I tried to set the attached property <code>KeyboardNavigation.TabNavigation</code> to
&quot;Local&quot; (on the container in the data template). According to MSDN this way the TabIndex property
inside the container is only considered within the container.</p>
<p>Setting the attached property worked, but with an annoying side-effect, for example, if we have a
ContentPresenter (to incorporate another data template) and a button:</p>
<pre><div style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-xml" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token" style="color:hsl(355, 65%, 65%)">ContentPresenter</span><span class="token" style="color:hsl(355, 65%, 65%)">
</span><span class="token" style="color:hsl(355, 65%, 65%)">    </span><span class="token" style="color:hsl(29, 54%, 61%)">Content</span><span class="token" style="color:hsl(220, 14%, 71%)">=</span><span class="token" style="color:hsl(95, 38%, 62%)">{Binding</span><span class="token" style="color:hsl(355, 65%, 65%)"> </span><span class="token" style="color:hsl(29, 54%, 61%)">Something}</span><span class="token" style="color:hsl(355, 65%, 65%)">
</span><span class="token" style="color:hsl(355, 65%, 65%)">    </span><span class="token" style="color:hsl(29, 54%, 61%)">KeyboardNavigation.TabIndex</span><span class="token" style="color:hsl(220, 14%, 71%)">=</span><span class="token" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token" style="color:hsl(95, 38%, 62%)">0</span><span class="token" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token" style="color:hsl(355, 65%, 65%)"> </span><span class="token" style="color:hsl(220, 14%, 71%)">/&gt;</span><span>
</span><span>  </span><span class="token" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token" style="color:hsl(355, 65%, 65%)">Button</span><span class="token" style="color:hsl(355, 65%, 65%)"> </span><span class="token" style="color:hsl(29, 54%, 61%)">KeyboardNavigation.TabIndex</span><span class="token" style="color:hsl(220, 14%, 71%)">=</span><span class="token" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token" style="color:hsl(95, 38%, 62%)">1</span><span class="token" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">&gt;</span><span>Ok</span><span class="token" style="color:hsl(220, 14%, 71%)">&lt;/</span><span class="token" style="color:hsl(355, 65%, 65%)">Button</span><span class="token" style="color:hsl(220, 14%, 71%)">&gt;</span></code></div></pre>
<p>And the container in the data template of the content presenter has the <code>TabNavigation</code> property set
to &quot;Local&quot;, this will make the button focus first, and the contents of the ContentPresenter
afterwards (I&#x27;m not sure why).</p>
<p>To fix this use the following code:</p>
<pre><div style="background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto;border-radius:0.3em"><code class="language-xml" style="white-space:pre;background:hsl(220, 13%, 18%);color:hsl(220, 14%, 71%);text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:&quot;Fira Code&quot;, &quot;Fira Mono&quot;, Menlo, Consolas, &quot;DejaVu Sans Mono&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:2;-o-tab-size:2;tab-size:2;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token" style="color:hsl(355, 65%, 65%)">ContentControl</span><span class="token" style="color:hsl(355, 65%, 65%)">
</span><span class="token" style="color:hsl(355, 65%, 65%)">    </span><span class="token" style="color:hsl(29, 54%, 61%)">Content</span><span class="token" style="color:hsl(220, 14%, 71%)">=</span><span class="token" style="color:hsl(95, 38%, 62%)">{Binding</span><span class="token" style="color:hsl(355, 65%, 65%)"> </span><span class="token" style="color:hsl(29, 54%, 61%)">Something}</span><span class="token" style="color:hsl(355, 65%, 65%)">
</span><span class="token" style="color:hsl(355, 65%, 65%)">    </span><span class="token" style="color:hsl(29, 54%, 61%)">Focusable</span><span class="token" style="color:hsl(220, 14%, 71%)">=</span><span class="token" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token" style="color:hsl(95, 38%, 62%)">False</span><span class="token" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token" style="color:hsl(355, 65%, 65%)">
</span><span class="token" style="color:hsl(355, 65%, 65%)">    </span><span class="token" style="color:hsl(29, 54%, 61%)">KeyboardNavigation.TabNavigation</span><span class="token" style="color:hsl(220, 14%, 71%)">=</span><span class="token" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token" style="color:hsl(95, 38%, 62%)">Local</span><span class="token" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token" style="color:hsl(355, 65%, 65%)">
</span><span class="token" style="color:hsl(355, 65%, 65%)">    </span><span class="token" style="color:hsl(29, 54%, 61%)">KeyboardNavigation.TabIndex</span><span class="token" style="color:hsl(220, 14%, 71%)">=</span><span class="token" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token" style="color:hsl(95, 38%, 62%)">0</span><span class="token" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token" style="color:hsl(355, 65%, 65%)"> </span><span class="token" style="color:hsl(220, 14%, 71%)">/&gt;</span><span>
</span><span>  </span><span class="token" style="color:hsl(220, 14%, 71%)">&lt;</span><span class="token" style="color:hsl(355, 65%, 65%)">Button</span><span class="token" style="color:hsl(355, 65%, 65%)"> </span><span class="token" style="color:hsl(29, 54%, 61%)">KeyboardNavigation.TabIndex</span><span class="token" style="color:hsl(220, 14%, 71%)">=</span><span class="token" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token" style="color:hsl(95, 38%, 62%)">1</span><span class="token" style="color:hsl(220, 14%, 71%)">&quot;</span><span class="token" style="color:hsl(220, 14%, 71%)">&gt;</span><span>Ok</span><span class="token" style="color:hsl(220, 14%, 71%)">&lt;/</span><span class="token" style="color:hsl(355, 65%, 65%)">Button</span><span class="token" style="color:hsl(220, 14%, 71%)">&gt;</span></code></div></pre></div></div><div class="e-post__next"><span>Next:</span><a class="e-post__next" href="/2011/03/keyboard-friendly-wpf-popup-control.html">Keyboard Friendly WPF Popup Control</a></div></div></body></html>