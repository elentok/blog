<html><head><title>@elentok - </title><style type="text/css">body {
  font-family: sans-serif;
  background: #242424;
  color: #e9e9e9;
  font-size: 18px;
  line-height: 1.5;
}

pre, code {
  font-family: 'Source Code Pro';
}

pre {
  padding: 15px;
  background-color: #121212;
  border-radius: 5px;
  line-height: 1.3;
}

a, a:visited {
  color: #98adec;
}

.e-page {
  margin: auto;
  max-width: 700px;
}</style></head><body><div class="e-page"><a class="e-header" href="/"><div class="e-header__avatar"><div class="e-avatar"></div></div><h1>Elentok's Blog</h1></a><h2>Why I love Ruby on Rails</h2><div><p>About four months ago I started writing a couple of projects in Ruby on Rails, and the more I used it, the more amazed I was at how easy it was and how fast I was advancing.</p>
<p><a name="more"></a></p>
<p>The purpose of this post is to share some of the things I love about Ruby on Rails.</p>
<h2 id="1-everything-has-its-place">1. Everything has its place</h2>
<p>Whenever I worked on a web project one of the things that always annoyed me was that the directory structure never felt &quot;right&quot;, I kept moving files around, trying to make it better, but it was never perfect.</p>
<p>Ruby on Rails apps have the best directory structure I have ever seen (part of the reason it&#39;s so good is because of the asset pipeline which I&#39;ll talk about later):</p>
<ul>
<li>root/<ul>
<li>app/<ul>
<li>assets/ - app-only images, stylesheets and javascript (no 3rd party)</li>
<li>models/ - active record models</li>
<li>views/ - views (haml, erb, etc...)</li>
<li>controllers/</li>
<li>helpers/</li>
</ul>
</li>
<li>config/ - all configuration files, localizations</li>
<li>db/ - db-related stuff (migrations, schema, sqlite databases)</li>
<li>doc/</li>
<li>lib/</li>
<li>log/</li>
<li>public/</li>
<li>script/ - utility scripts</li>
<li>spec/ - all tests<ul>
<li>controllers/</li>
<li>factories/</li>
<li>models/</li>
<li>requests/</li>
<li>routing/</li>
</ul>
</li>
<li>vendor/ - 3rd party libraries (the place for jquery plugins, twitter bootstrap, html5 boilerplate, etc...)<ul>
<li>assets/</li>
<li>plugins/</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>When I need to add a new component I never have to think twice about where to put it, everything has its place.</p>
<p>To create a new rails project (with the entire directory structure) just run &quot;rails new {app-name}&quot;.</p>
<h2 id="2-active-record-migrations">2. Active Record Migrations</h2>
<p>ActiveRecord is Ruby on Rails&#39; default database layer, its best feature in my opinion is migrations.</p>
<p>A migration is basically a database patch, for example, a migration that adds a new table looks like this:</p>
<pre><code>  class CreateBooks &lt; ActiveRecord::Migration    def change      create_table :books do |t|        t.string :title        t.string :summary        t.string :author        t.float :price        t.timestamps      end    end  end
</code></pre><p>The &quot;t.timestamps&quot; automatically adds the &quot;last updated&quot; and &quot;date created&quot; fields.</p>
<p>Another example of a migration is changing the type of a field:</p>
<pre><code>  class ConvertPriceToInteger &lt; ActiveRecord::Migration    def up      change_column :books, :price, :integer    end    def down      change_column :books, :price, :float    end  end
</code></pre><p>You can write complex migrations use active record models to convert data (instead of writing lots of SQL code).</p>
<p>You can take any version of the database and run the new migrations on it by just running &quot;rake db:migrate&quot;.</p>
<p>As your application grows and changes, your database needs to adapt as well, and this is the best solution I&#39;ve found for this problem (at least for non-NoSQL databases).</p>
<h2 id="3-active-record-validations">3. Active Record Validations</h2>
<p>You can define model validations like this:</p>
<pre><code>  class Book &lt; ActiveRecord::Base    validates_presence_of :title, :author, :price    validates :price, numericality: { greater_than: 0 }  end
</code></pre><p>And when you try to save the object:</p>
<pre><code>  mybook = Book.new  mybook.save() # returns false
</code></pre><p>it will return false and you can access the validation errors via &quot;mybook.errors&quot;.</p>
<p>You can also add custom validations like:</p>
<pre><code>  class Book &lt; ActiveRecord::Base    validate :my_custom_validation    def my_custom_validation       unless /^a/.match(title).nil?        errors.add :title, \          &#39;books starting with &quot;a&quot; are not allowed!&#39;      end    end  end
</code></pre><p>The best thing about this is that it connects directly with the views generated by the &quot;rails g scaffold&quot; command so you just define the validations in one place and the errors will be displayed in the browser.</p>
<h2 id="4-active-record-relationships">4. Active Record Relationships</h2>
<p>Active Record also allows a simple way to define relationships between models, for example:</p>
<pre><code>  class LineItem &lt; ActiveRecord::Base    belongs_to :order  end  class Order &lt; ActiveRecord::Base    has_many :lineitem  end
</code></pre><p>This allows you do do stuff like &quot;lineItem.order.name&quot; and &quot;order.lineitems.length&quot; (by default this links aren&#39;t loaded, they will be loaded when you try to access the &quot;lineitems&quot; or &quot;order&quot; properties or if you use the &quot;include&quot; option when querying the model).</p>
<h2 id="5-asset-pipeline">5. Asset Pipeline</h2>
<p>It is now becoming a standard to use higher level languages such as SASS and Coffeescript instead of plain CSS and Javascript.</p>
<p>Both languages allow writing much cleaner and readable code, and SASS adds a lot of useful features to CSS like mixins, inheritance, variables and more.</p>
<p>The only problem with using these languages is that they must be compiled into css and javascript for the browser to understand them. Yhat&#39;s where the asset pipeline comes in, it will automatically find all assets (stylesheets, javascripts, coffeescripts) in the app/assets and vendor/ directories and serve them to the client.</p>
<p>A very useful feature of this is that in development mode all of the assets are served independently (so it&#39;s easier to debug), but when switching to production mode all of the assets are combined into a single compressed file (one .js file and one .css file, but you can customize it to create packages).</p>
<p>The asset pipeline also takes care of caching the resources and cache-busting when uploading a new version.</p>
<p>So when you want to add a new sass/coffeescript file just create in the app/assets/ directory and rails will take care of the rest.</p>
<h2 id="6-localization">6. Localization</h2>
<p>Rails has the best localization implementation I have ever worked with, all you need is a simple config/locales/{lang}.yml file which looks something like this:</p>
<pre><code>  he:    errors:      messages:        blank: אנא הכנס ערך        equal_to: חייב להיות שווה ל-%{count}    number:      separator: .      unit: $    human:      decimal_units:        units:          billion: ביליון          thousand: אלף      storage_units:        units:          byte:            one: בייט            other: בתים          gb: ג&#39;יגה-בייט    date:      formats:        default: ! &#39;%d.%m.%y&#39;        long: ! &#39;%e ב%B, %Y&#39;        short: ! &#39;%e %b&#39;    activerecord:      models:        attributes:          book:            title: שם            summary: תקציר            author: סופר            price: מחיר
</code></pre><p>This will automatically be loaded by Rails when once you change the locale to &quot;he&quot;, and will affect date/time formatting, views that use form helpers such as &quot;f.label_for&quot;.</p>
<p>If you just want to get the localized version of on of these items you can do &quot;I18n.t(&#39;activerecord.models.attributes.book.title&#39;)&quot; and it will translate it for you.</p>
<p>It also supports pluralization like this:</p>
<pre><code>  I18n.t(&#39;human.storage_units.byte&#39;, count: 4)
</code></pre><p>Which will return &quot;4 בתים&quot;.</p>
<p>This is just brilliant, think how many times you wrote code like this:</p>
<pre><code>  if (count == 1)    ... write the singular version  else    ... write the plural version
</code></pre><p>you don&#39;t need that anymore!</p>
<h2 id="7-test-driven">7. Test Driven</h2>
<p>Ruby is the most test friendly platform I have ever used, everything can be stubbed and mocked.</p>
<p>When you use rails generators to create scaffolds, controllers and all the other stuff it can generate it always generates the base tests for them, so when you want to add tests all you have to do is open the relevant file and start writing.</p>
<p>The testing framework I like the most with ruby is RSpec, the hierarchal format of the tests makes them really easy to both write and read, for example:</p>
<pre><code>  describe Book do    describe &quot;#save&quot; do      context &quot;with no values&quot; do        before :each do          @book = Book.new()          @result = @book.save()        end        it &quot;returns false&quot; do          @result.should be_false        end        it &quot;has an error for the &#39;title&#39; field&quot; do          @result.errors[:title].type.should == &#39;required&#39;        end      end    end  end
</code></pre><p>When running rspec the output will look like this:</p>
<pre><code>  Done    #save      with no values        returns false        has an error for the &#39;title&#39; field
</code></pre><p>Very readable! very comfortable to write.</p>
<p>There&#39;s another testing framework for Rails called &quot;Cucumber&quot;, it&#39;s designed for acceptance tests mostly (from what I understand) and it looks like this:</p>
<pre><code>  Feature: name of the feature  As a user  I want this feature  So I will have this feature    Scenario: doing something    Given a form    When I click the button    Then something happens
</code></pre><p>I use this with capybara and selenium to automate acceptance tests, and what I love about this is this:</p>
<ul>
<li>It creates an executable document that can be shared with the QA team and the product owners.</li>
<li>When these tests are written before the implementation (as they should be) they offer great guidance and focus for the development process.</li>
</ul>
<p>An annoying issue about running tests in Rails is that it takes a few seconds to load the rails framework. Fortunately, there&#39;s a tool called &quot;<a href="http://spork.rubyforge.org/">Spork</a>&quot; that fixes this problem by running a server with a preloaded version of the rails server and forks a copy of it every time you run your tests. I&#39;ve been using it for the past months and it has improved my tests from ~4 seconds to ~50 milliseconds, so I highly recommend it.</p>
<p>Database testing!!</p>
<p>When running your tests Rails connects to a testing database (can be a local sqlite db) so you can run all of sorts of database-dependant tests (unique values, etc...).</p>
<h2 id="8-there-s-a-gem-for-your-every-need">8. There&#39;s a gem for your every need</h2>
<p>As of the time of writing this there are 35,950 gems in <a href="http://rubygems.org">rubygems</a>. I have only scraped the surface and these are some of the really cool gems I&#39;ve found:</p>
<ul>
<li><a href="https://github.com/thoughtbot/paperclip">Paperclip</a> - adds file attachment support to active record model (just add an &quot;:attachment&quot; field to your model and you&#39;re done).</li>
<li><a href="https://github.com/plataformatec/devise">Devise</a> - adds user authentication support, very easy to use (took me about 5 minutes to get it working the first time I used it), very customizable (it can create its own models or attach to existing ones).</li>
<li><a href="https://github.com/yonbergman/enumify">Enumify</a> - adds enum supports for activerecord models.</li>
<li><a href="https://github.com/thoughtbot/factory_girl">Factory Girl</a> - fixtures replacement with a straightforward definition syntax</li>
<li><a href="https://github.com/guard/guard-livereload">LiveReload</a> - automatically reloads your browser when files in the project directory has changed.</li>
</ul>
<h2 id="9-ruby-is-awesome-">9. Ruby is awesome!</h2>
<p>I just love this language! these examples are freakin&#39; amazing:</p>
<pre><code>  if date &lt; 1.year.ago    ...  end  3.times do    ...  end
</code></pre><p>And I love the fact that you don&#39;t need brackets to call a method.</p>
<h2 id="10-vim-is-the-perfect-rails-ide">10. Vim is the perfect Rails IDE</h2>
<p>With tons of rails-related Vim plugins such as <a href="http://www.vim.org/scripts/script.php?script_id=1567">vim-rails</a>, <a href="https://github.com/vim-ruby/vim-ruby">vim-ruby</a>, <a href="https://github.com/tpope/vim-haml">vim-haml</a>, <a href="https://github.com/kchmck/vim-coffee-script">vim-coffeescript</a> and many more I have been really enjoying working on Ruby on Rails projects with Vim.</p>
<p>I have been using Vim for about 15 years now, and I&#39;m amazed at how I keep learning new things about it and improving my vim-skills.</p>
<h2 id="how-i-learned-ruby-on-rails">How I learned Ruby on Rails</h2>
<ul>
<li>I read (and practiced) the <a href="http://pragprog.com/book/rails4/agile-web-development-with-rails">Agile Web Development with Rails book</a>. It&#39;s also highly recommended by the ruby on rails official home page.</li>
<li>I think I learned the most about Rails by subscribing to Gary Bernhardt&#39;s <a href="https://www.destroyallsoftware.com/">Destroy All Software</a> screencasts. All of his screencasts are about 10 minutes long, very straightforward and condensed with information and techniques. In addition to improving my RoR skills, these screencasts have given me a much better understanding of TDD.</li>
<li>Another screencasts web site for RoR is <a href="http://railscasts.com/">railscasts.com/</a>, I started watching their free screencasts and I&#39;m considering subscribing to them too.</li>
</ul>
<p>Hope you enjoyed this post, I know I did :-) Thanks for reading,</p>
<p>David.</p>
</div></div><style type="text/css">@import "/style.css";
@import url('https://fonts.googleapis.com/css?family=Open+Sans|Source+Code+Pro');</style></body></html>